let scn = msc.scene();
let line = scn.mark("line", { x1: 200, y1: 80, x2: 400, y2: 80, strokeColor: "green" });

let dt = await msc.csv("datasets/csv/obesityEducation.csv");

scn.repeat(line, dt, { field: "State" });
let enc = scn.encode(line.vertices[0], { field: "Obesity Percentage", channel: "y" });
scn.encode(line.vertices[1], { field: "BA Degree Percentage", channel: "y", scale: enc.scale });
enc.scale.domain = [15, 50];
enc.scale.rangeExtent = 500;
scn.encode(line, { field: "Obesity vs Higher Education", channel: "strokeColor" });

scn.setProperties(line.vertices[0], { shape: "circle", radius: 4, opacity: "0.7" });
scn.setProperties(line.vertices[1], { shape: "circle", radius: 4, opacity: "0.7" });

let leftAxis = scn.axis("y", "Obesity Percentage", { orientation: "left" });
let rightAxis = scn.axis("y", "BA Degree Percentage", { orientation: "right" });
scn.legend("strokeColor", "Obesity vs Higher Education", { x: 460, y: 100 });
scn.addInteraction({
    listener: scn,
    event: "brush",
    hitObject: leftAxis,
    target: line,
    predicate: [{ field: "Obesity Percentage", type: "range", channel: 'y' }],
    targetEval: {
        false: { opacity: 0.3, vxOpacity: 0.3 },
    },
    style: { fillColor: "#C8E6FA", leftMargin: 10, rightMargin: 10 },
    brushProp: { color: 'pink' }

});
scn.addInteraction({
    listener: scn,
    event: "brush",
    hitObject: rightAxis,
    target: line,
    predicate: [{ field: "BA Degree Percentage", type: "range", channel: 'y' }],
    targetEval: {
        false: { opacity: 0.3, vxOpacity: 0.3 },
    },
    style: { fillColor: "#C8E6FA", leftMargin: 10, rightMargin: 10 },
    brushProp: { color: 'steelblue' }
})
// let r = msc.renderer("svg");
// r.render(scn, "svgElement", {collectionBounds: false});	
